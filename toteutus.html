<!DOCTYPE html>
<html lang="fi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <!-- Bootstrap CSS linkki -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- JS linkki -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>JSON palautus</title>
  </head>

  <style>
    img {
      width: 100%;
    }
  </style>

  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-sm navbar-custom">
      <div class="container-fluid">
        <!-- Hamburger -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#collapsibleNavbar"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
          <!-- Links -->
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="./index.html">Etusivu</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./toteutus.html">Toteutus</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html">Kolmas</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main>
      <div id="vastaus"></div>

      <script>
        // Haetaan tiedot json-tiedostosta
        fetch("toteutus.json")
          //Sitten muunnetaan vastaus oliomuotoon
          .then(function (response) {
            return response.json();
          })

          //Käsitellään muunnettu vastaus ja kutsutaan funktiota kerro() ja välitetään sille json-vastaus
          .then(function (responseJson) {
            kerro(responseJson);
          })

          //Jos hakemisessa tuli virhe, kerrotaan siitä sivulla
          .catch(function (error) {
            document.getElementById("vastaus").innerHTML =
              "<p>Tietoa ei pystytä hakemaan</p>";
          });

        //funktio, joka hakee tiedon objektista ja kirjoittaa ne sivulle

        function kerro(obj) {
          let tiedot =
            "<center><h3>" +
            "Toteutuksen nimi: " +
            obj.toteutuksen_nimi +
            "<br><hr>" +
            "</h3>" +
            "<br>" +
            "Osallistujien lukumäärä: " +
            obj.osallistujien_lukumaara +
            "<br>" +
            "Osallistujat: " +
            obj.osallistujat +
            "<br>" +
            "Toteutuksen alkamis- ja loppumisaika: " +
            obj.toteutuksen_alkamis_ja_loppumisaika +
            "<br>" +
            "Toteutuksen kesto viikkoina: " +
            obj.toteutuksen_kesto_viikkoina +
            "<br>" +
            "<p><img src=" +
            obj.kuva +
            "></p>" +
            "<br></center>";

          tiedot += "</p>";

          document.getElementById("vastaus").innerHTML = tiedot;
        }
      </script>
    </main>
  </body>
</html>
