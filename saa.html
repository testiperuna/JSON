<!DOCTYPE html>
<html lang="fi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <!-- Bootstrap CSS linkki -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- JS linkki -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>JSON palautus</title>
  </head>

  <style>
    img {
      width: 100%;
    }
  </style>

  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-sm navbar-custom">
      <div class="container-fluid">
        <!-- Hamburger -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#collapsibleNavbar"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
          <!-- Links -->
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="./index.html">Etusivu</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./toteutus.html">Toteutus</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./pokehaku.html">Pokehaku</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./saa.html">Säätiedot</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main>
      <h1>Sää Helsingissä</h1>
      <p id="aika"></p>
      <h5 id="saa"></h5>
      <h5 id="lampotila"></h5>
      <h5 id="tuuli"></h5>
      <h5 id="kuva"></h5>

      <!-- Kirjoitetaan sääfunktio -->
      <script>
        fetch(
          `https://api.openweathermap.org/data/2.5/weather?id=658225&appid=a5d0234503de4ebfcca87103995a9933&lang=fi&units=metric`
        )
          //Muunnetaan vastaus JSON-muotoon
          .then(function (response) {
            return response.json();
          })

          //Käsitellään muunnettu (eli JSON muotoinen) vastaus
          //Tulostetaan sivulle halutut tiedot
          .then(function (data) {
            let nyt = new Date().toTimeString().slice(0, 5);
            document.getElementById("aika").innerHTML = "Sää kello " + nyt;
            document.getElementById("saa").innerHTML =
              "<b>Sää:</br></br>" + data.weather[0].description + "</b></br>";
            document.getElementById("lampotila").innerHTML =
              "<b></br>Lämpötila:</br></br>" + data.main.temp + "°C</b></br>";
            document.getElementById("tuuli").innerHTML =
              "<b></br>Tuuli:</br></br>" + data.wind.speed + " m/s</b></br>";
            document.getElementById("kuva").innerHTML =
              "</br></br>" +
              `<img id="saakuva" src=https://openweathermap.org/img/wn/${data.weather[0].icon}.png>` +
              "</br>";
          });
      </script>
    </main>
  </body>
</html>
